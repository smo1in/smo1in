<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="-1">
  <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Send Your CV</title>

  <!-- CSS -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow-x: hidden; /* Prevent horizontal scrolling */
      font-family: 'Roboto', sans-serif;
      background-color: #f4f4f4;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #preloader-container {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      background: linear-gradient(135deg, #6e8efb, #a777e3);
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    #preloader-container .preloader-wrapper {
      margin: 0 auto;
    }

    #preloader-container .loading-text {
      margin-top: 20px;
      font-size: 18px;
      color: #fff;
      font-weight: 500;
      animation: fadeIn 1.5s infinite;
    }

    @keyframes fadeIn {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .spinner {
      display: inline-block;
      width: 50px;
      height: 50px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    #iframe {
      width: 100%;
      height: 100vh; /* Full viewport height */
      border: none;
      display: none;
    }

    /* Media Queries for Mobile Devices */
    @media (max-width: 600px) {
      #preloader-container {
        width: 80%;
        padding: 20px;
        padding-top: 30px;
      }

      #preloader-container .loading-text {
        font-size: 16px;
      }

      #iframe {
        height: 100vh; /* Full viewport height */
      }
    }
  </style>

  <!-- Iframe Loading Handling -->
  <script defer>
    document.addEventListener('DOMContentLoaded', function() {
      var iframe = document.getElementById('iframe');
      var preloaderContainer = document.getElementById('preloader-container');
      
      iframe.onload = function() {
        clearTimeout(loadingTimeout);
        preloaderContainer.style.display = 'none';
        iframe.style.display = 'block';
      };

      var loadingTimeout = setTimeout(function() {
        preloaderContainer.style.display = 'none';
        iframe.style.display = 'block';
      }, 5000); // Timeout set to 5 seconds

      // Detect Instagram in-app browser on iPhone
      var ua = navigator.userAgent || navigator.vendor || window.opera;
      var isIPhoneInstagram = (ua.indexOf('Instagram') > -1) && (ua.indexOf('iPhone') > -1);
      
      if (isIPhoneInstagram) {
        // Display alert advising to open in external browser
        alert("Due to Instagram's iOS limitations, please open this form in your device's regular browser by tapping the three dots at the top right corner and selecting 'Open in external browser'.");
      }
    });
  </script>
</head>
<body>
  <!-- Preloader Container -->
  <div id="preloader-container">
    <!-- Preloader -->
    <div class="preloader-wrapper">
      <div class="spinner"></div>
    </div>
    <!-- Loading Text -->
    <div class="loading-text">Loading...</div>
  </div>

  <!-- Iframe with Lazy Loading -->
  <iframe 
    id="iframe" 
    src="https://script.google.com/macros/s/AKfycbx7VsUtvuySXQzKO3l1kzKrtBXr5yRnst_fziGsSkOrVIelK5jVkLSuQUZKGyGJa8r2Jw/exec" 
    frameborder="0" 
    loading="lazy">
  </iframe>

  <!-- Deferred JavaScript Loading -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js" defer></script>
</body>
</html>
